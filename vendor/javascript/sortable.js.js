// sortable.js@0.3.0 downloaded from https://ga.jspm.io/npm:sortable.js@0.3.0/index.js

import e from"mout/object/fillIn";import t from"mout/array/indexOf";var r={};var a=e;var l=t;var Sortable=function(e,t){if(!(this instanceof Sortable))return new Sortable(e,t);this.el=e;this.options=a(t||{},Sortable.defaults);this._build();this._setEvents()};Sortable.defaults={handle:"",placeholderClass:"sortable-placeholder"};Sortable.prototype._build=function(){var e=document.createElement("li");e.classList.add(this.options.placeholderClass);this.placeholder=e};Sortable.prototype._setEvents=function(){var e=this;var t=false;e.el.addEventListener("mousedown",(function(r){e.options.handle||(t=true);e.options.handle&&r.target.matches(e.options.handle)&&(t=true)}));e.el.addEventListener("dragstart",(function(r){if(t){r.stopPropagation();t=false;e.dragging=true;e.dragEl=r.target;r.dataTransfer.setData("text","");setTimeout((function(){var t=r.target.getBoundingClientRect();e.placeholder.style.height=t.bottom-t.top+"px";e.el.insertBefore(e.placeholder,r.target);r.target.style.display="none"}),1)}else r.preventDefault()}));e.el.addEventListener("dragenter",(function(t){if(e.dragging&&t.target!==e.placeholder){t.stopPropagation();var r=e.getItem(t.target);if(r){var a=l(e.el.children,e.placeholder);var o=l(e.el.children,r);var n=-1===a||a>o;e.el.insertBefore(e.placeholder,n?r:r.nextSibling)}}}));document.body.addEventListener("dragend",(function(t){if(e.dragging){t.stopPropagation();e.dragging=false;e.el.insertBefore(e.dragEl,e.placeholder);e.dragEl.style.display="block";e.el.removeChild(e.placeholder);e.placeholder.style.height=""}}))};Sortable.prototype.getItem=function(e){var t=this.el.children;var r;while(e.parentNode){r=l(t,e);if(-1!==r&&e!==this.placeholder)return e;e=e.parentNode}};r=Sortable;var o=r;export default o;

